syntax = "proto3";

package sem.middleware.disco_dialogue;

option go_package = "github.com/go-go-golems/pinocchio/cmd/web-chat/thinkingmode/pb;thinkingmodepb";

// Payload for a single internal dialogue line.
message DiscoDialogueLinePayload {
  string dialogue_id = 1;
  string line_id = 2;
  string persona = 3;
  string tone = 4;
  string text = 5;
  string trigger = 6; // passive|active|antipassive|thought
  double progress = 7;
  string status = 8; // started|update|completed
}

// Payload for a check/roll event.
message DiscoDialogueCheckPayload {
  string dialogue_id = 1;
  string line_id = 2;
  string check_type = 3; // passive|active|antipassive
  string skill = 4;
  int32 difficulty = 5;
  int32 roll = 6;
  bool success = 7;
}

// Payload for dialogue lifecycle events.
message DiscoDialogueStatePayload {
  string dialogue_id = 1;
  string status = 2; // started|update|completed
  string summary = 3;
}

message DiscoDialogueLineStarted {
  string item_id = 1;
  DiscoDialogueLinePayload data = 2;
}

message DiscoDialogueLineUpdate {
  string item_id = 1;
  DiscoDialogueLinePayload data = 2;
}

message DiscoDialogueLineCompleted {
  string item_id = 1;
  DiscoDialogueLinePayload data = 2;
  bool success = 3;
  string error = 4;
}

message DiscoDialogueCheckStarted {
  string item_id = 1;
  DiscoDialogueCheckPayload data = 2;
}

message DiscoDialogueCheckUpdate {
  string item_id = 1;
  DiscoDialogueCheckPayload data = 2;
}

message DiscoDialogueCheckCompleted {
  string item_id = 1;
  DiscoDialogueCheckPayload data = 2;
  bool success = 3;
  string error = 4;
}

message DiscoDialogueStateStarted {
  string item_id = 1;
  DiscoDialogueStatePayload data = 2;
}

message DiscoDialogueStateUpdate {
  string item_id = 1;
  DiscoDialogueStatePayload data = 2;
}

message DiscoDialogueStateCompleted {
  string item_id = 1;
  DiscoDialogueStatePayload data = 2;
  bool success = 3;
  string error = 4;
}
